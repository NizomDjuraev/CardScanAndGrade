<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: screens/HomeScreen.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: screens/HomeScreen.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from "react";
import { StyleSheet, Text, TextInput, Button, TouchableOpacity, View, Modal, FlatList } from "react-native";
import { createCollection } from "../backend/supabase";
import { useCollections } from '../hooks/useCollections';
import { useUser } from "@clerk/clerk-expo";

/**
* HomeScreen component displays a searchable list of collections. It allows users to search for collections and add new collections. Utilizes custom hooks for fetching user data and collections, and manages local state for UI control.
* @function HomeScreen
* @returns {Object} The Home screen
*/
export default function HomeScreen() {
    const { user } = useUser();
    const { collections, loading, reloadCollections } = useCollections(user?.id);

    const [collectionName, setCollectionName] = useState("");
    const [modalVisible, setModalVisible] = useState(false);
    const [searchQuery, setSearchQuery] = useState("");

    /**
     * Filters collections based on search query. Case-insensitive.
     * @function filteredCollections
     * @returns {Array} Filtered list of collections.
     */
    const filteredCollections = collections.filter(collection => {
      return collection.collection.toLowerCase().startsWith(searchQuery.toLowerCase());
    });
  
    /**
     * Creates a new collection for the user and reloads the collection list.
     * Requires the user to be defined and collectionName to be not empty.
     * @async
     * @function onCreateCollectionPress
     * @returns {Promise&lt;void>}promise that resolves once the collection has been created and the list reloaded.
     */
    const onCreateCollectionPress = async () => {
      if (collectionName &amp;&amp; user) {
        await createCollection(user.id, user.firstName, user.lastName, collectionName);
        setCollectionName("");
        reloadCollections();
      }
    };

    /**
     * Updates the search query state.
     * @function updateSearchQuery
     * @param {string} query - The current text in the search input.
     */
    const updateSearchQuery = (query) => {
      setSearchQuery(query);
    };
  
    return (
      &lt;View style={styles.container}>
        &lt;View style={styles.searchBarContainer}>
            &lt;TextInput
                style={styles.searchBarInput}
                placeholder="Search for a collection"
                placeholderTextColor="#000"
                value={searchQuery}
                onChangeText={updateSearchQuery}
            />
            &lt;TouchableOpacity style={styles.addButton} onPress={() => setModalVisible(true)}>
              &lt;Text style={styles.addButtonText}>+&lt;/Text>
            &lt;/TouchableOpacity>
        &lt;/View>
        {loading ? (
          &lt;Text>Loading collections...&lt;/Text>
        ) : (
          &lt;>
            &lt;View style={styles.collectionsContainer}>
              &lt;FlatList
                  data={filteredCollections}
                  keyExtractor={(item, index) => index.toString()}
                  renderItem={({ item, index }) => (
                    &lt;View key={index} style={styles.collectionItem}>
                      &lt;Text style={styles.collectionText}>{item.collection}&lt;/Text>
                    &lt;/View>
                  )}
                  numColumns={2}
                  style={{ height: 612 }}
                />
            &lt;/View>
          &lt;/>
        )}
        
        &lt;Modal
          animationType="slide"
          transparent={true}
          visible={modalVisible}
          onRequestClose={() => {
            setModalVisible(!modalVisible);
          }}
        >
          &lt;View style={styles.centeredView}>
            &lt;View style={styles.modalView}>
              &lt;TextInput
                style={styles.input}
                value={collectionName}
                onChangeText={setCollectionName}
                placeholder="Enter collection name"
                placeholderTextColor="#a7a7a7"
              />
              &lt;Button title="Create Collection" onPress={onCreateCollectionPress} />
              &lt;TouchableOpacity style={{ marginTop: 10 }} onPress={() => setModalVisible(!modalVisible)}>
                &lt;Text>Close&lt;/Text>
              &lt;/TouchableOpacity>
            &lt;/View>
          &lt;/View>
        &lt;/Modal>
      &lt;/View>
    );
  }

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: "center",
    justifyContent: "center",
    padding: 0,
    backgroundColor: '#adadad',
  },
  collectionCreation: {
    flexDirection: "row",
    marginTop: 20,
    alignItems: "center"
  },
  input: {
    borderWidth: 1,
    borderColor: "#ccc",
    padding: 10,
    marginRight: 10,
    flex: 1
  },
  addButton: {
    width: 50,
    height: 50,
    borderRadius: 25,
    backgroundColor: '#2e78b7',
    alignItems: 'center',
    justifyContent: 'center',
    marginLeft: 15,
    marginRight: 15,
    marginTop: 40,
    
  },
  addButtonText: {
    fontSize: 30,
    color: '#fff',
    textAlignVertical: 'center',
    textAlign: 'center',
  },
  centeredView: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    marginTop: 22
  },
  modalView: {
    margin: 20,
    height: '30%',
    backgroundColor: "white",
    borderRadius: 20,
    padding: 35,
    alignItems: "center",
    shadowColor: "#000",
    shadowOffset: {
      width: 0,
      height: 2
    },
    shadowOpacity: 0.25,
    shadowRadius: 4,
    elevation: 5
  },
  collectionsHeader: {
    fontWeight: 'bold',
    fontSize: 20,
    marginBottom: 10,
  },
  collectionsContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
    alignItems: "flex-start",
    width: '100%',
    paddingHorizontal: 5,
    marginTop: '39%',
  },
  collectionItem: {
    width: '48%',
    aspectRatio: 1,
    backgroundColor: 'black',
    justifyContent: 'center',
    alignItems: 'center',
    margin: '1%',
    borderRadius: 10,
  },
  collectionText: {
    color: '#fff',
  },
  searchBarContainer: {
    backgroundColor: '#272727',
    height: '20%',
    width: '100%',
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    position: "absolute",
    top: 0,
  },
  searchBarInput: {
      backgroundColor: '#fff',
      borderRadius: 20,
      padding: 15,
      flex: 1,
      marginLeft: 15,
      marginTop: 40,
  },
})
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#CameraScreen">CameraScreen</a></li><li><a href="global.html#HomeScreen">HomeScreen</a></li><li><a href="global.html#MainTabs">MainTabs</a></li><li><a href="global.html#Navigation">Navigation</a></li><li><a href="global.html#OAuthButtons">OAuthButtons</a></li><li><a href="global.html#ProfileScreen">ProfileScreen</a></li><li><a href="global.html#RootNavigator">RootNavigator</a></li><li><a href="global.html#SettingsScreen">SettingsScreen</a></li><li><a href="global.html#SignInScreen">SignInScreen</a></li><li><a href="global.html#SignUpScreen">SignUpScreen</a></li><li><a href="global.html#VerifyCodeScreen">VerifyCodeScreen</a></li><li><a href="global.html#createCollection">createCollection</a></li><li><a href="global.html#filteredCollections">filteredCollections</a></li><li><a href="global.html#getCollections">getCollections</a></li><li><a href="global.html#onCreateCollectionPress">onCreateCollectionPress</a></li><li><a href="global.html#onPress">onPress</a></li><li><a href="global.html#onSignInPress">onSignInPress</a></li><li><a href="global.html#onSignOutPress">onSignOutPress</a></li><li><a href="global.html#onSignUpPress">onSignUpPress</a></li><li><a href="global.html#openCameraRoll">openCameraRoll</a></li><li><a href="global.html#retakePicture">retakePicture</a></li><li><a href="global.html#supabase">supabase</a></li><li><a href="global.html#takePicture">takePicture</a></li><li><a href="global.html#updateSearchQuery">updateSearchQuery</a></li><li><a href="global.html#useCachedResources">useCachedResources</a></li><li><a href="global.html#useCollections">useCollections</a></li><li><a href="global.html#useEffect">useEffect</a></li><li><a href="global.html#useSessionTokenEffect">useSessionTokenEffect</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 14 2024 16:29:05 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
